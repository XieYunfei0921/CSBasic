1.  **代码生成器**

用于生成`ORM`中`pojo`实例, `mapper` 实例, `service` 实例

2. **监控系统设计**

   监控基础

   ```markdown
   监控流程
   1. 数据采集(LogStash,FileBeat)
   
   	+ 数据源
   	1. 本监控对象提供REST API进行数据采集(Hadoop,ES)
   	2. 系统命令行
   	3. 统一SDK进行埋点上传 --> 如何设计埋点
       
   2. 数据传输
   	
   	将数据通过TCP/UDP 方式传输给监控系统, 可以主动push, 被动pull
   
   3. 数据存储
   	可选
   	1. RDBMS mysql/oracle
   	2. 时序数据库 InfluxDB
   	
   4. 数据展示
   	数据可视化
   
   5. 监控告警
   	
   	邮件/IM/短信通知
   ```

   选型

   | 名称       | 优点                                                         | 缺点                                                 |
   | ---------- | ------------------------------------------------------------ | ---------------------------------------------------- |
   | Zabbix     | 扩展型强,支持用户自定义脚本                                  | RDBMS写入是瓶颈上限,二次开发困难                     |
   | Prometheus | Pull模式,不容易消息积压,轻量级Server,架构简单,<br />支持PromQL查询语言,支持k8s,etcd等 | 基于Pull模型,需要合理规划网络设计,保证每个节点都可以 |
   

   
   **使用监控需要做的东西**
   
   1. 监控一下系统参数
      + HTTP请求次数
      + RPC调用的次数
      + JVM 参数
        + GC次数
        + 线程数量
        + 死锁线程数量
      + 线程池参数
      + 连接池参数
      + 日志监控情况
      + 业务指标
      + 中间件监控
      + 数据库监控
      + 硬件参数
      + 服务器基础参数指标
   
   **需求清单**
   
   | 需求名称                | 基本指标                                                     | 完成情况 | 类别   | 备注                                                         |
   | ----------------------- | ------------------------------------------------------------ | -------- | ------ | ------------------------------------------------------------ |
   | 监控系统参数            | 内存,网络,磁盘,CPU                                           | 100      | 系统   |                                                              |
   | MySQL监控               | 数据库连接数量,QPS,TPS,并行会话数量,<br />缓存命中率,主从延时,锁状态,慢查询 |          | 中间件 |                                                              |
   | Redis监控(系统级别缓存) | 成功连接数量,阻塞连接数量,内存使用情况<br />请求数量,耗时,缓存命中率 |          | 中间件 |                                                              |
   | Kafka监控(消息队列)     | 连接数量,队列数量,生产速率,消费速率,消息堆积                 |          | 中间件 |                                                              |
   | Nginx监控               |                                                              |          | 中间件 | 不使用                                                       |
   | HTTP接口                |                                                              |          | 应用   |                                                              |
   | RPC接口                 |                                                              |          | 应用   |                                                              |
   | JVM                     |                                                              |          | 应用   |                                                              |
   | 线程池                  |                                                              |          | 应用   |                                                              |
   | 连接池                  |                                                              |          | 应用   |                                                              |
   | 日志监控                |                                                              |          | 应用   |                                                              |
   | 自定义                  |                                                              |          | 业务   |                                                              |
   | Hadoop监控              |                                                              |          | 中间件 | Grafana上的dashboard不满足使用要求,依赖于InfluxDB,或者是依赖于K8S |
   | Zookeeper监控           |                                                              |          | 中间件 |                                                              |
   | HBase监控               |                                                              |          | 中间件 |                                                              |
   
   
   
   #### Hadoop监控
   
   | 类别     | 分类     | 监控目标           | 指标计算                                  | 采集项目 |
   | -------- | -------- | ------------------ | ----------------------------------------- | -------- |
   | 黑盒测试 |          |                    |                                           |          |
   | 白盒测试 | 错误信息 | Block丢失量        | `NumberOfMissingBlocks`                   |          |
   |          |          | 不可用数据节点占比 | `NumDecommissioningDataNodes`             |          |
   |          |          | 错误日志关键字监控 |                                           |          |
   |          |          | 错误原因分类统计   |                                           |          |
   |          | 流量信息 | Block读写次数      | `BlocksRead` / `BlocksWritten`            |          |
   |          | 延迟     | `RPC`平均处理时间  | `ReadBlockOpAvgTime`                      |          |
   |          |          | Block读取耗时      |                                           |          |
   |          | 容量     | 集群总空间         | `CapcityTotalGB`,`PercentUse`             |          |
   |          |          | 空间使用率         | `HeapMemory.used/HeapMemoryUsed.commited` |          |
   |          |          | 数据均衡度         |                                           |          |
   |          |          | `RPC`请求队列长度  | `CallQueueLength`                         |          |
   
   
   
   `SparkStream`和`Flink`监控
   
   1. `Spark`应用的监控 	https://www.shuzhiduo.com/A/o75N3bNMdW/
   
   2. `Flink`应用的监控     
   
      方案: https://cloud.tencent.com/developer/news/568303
   
   
   
   **业务指标**
   
   | 指标名称 | 指标计算方式 | 备注 |
   | -------- | ------------ | ---- |
   |          |              |      |
   
   
   
   
   
   #### JMX
   
3. **数据分析工具开发**

+ 市面上常见的数据分析工具

| 名称     | 优势                                   | 缺陷                            |
| -------- | -------------------------------------- | ------------------------------- |
| Zeppelin | 扩展性强,支持自定义后端语言            | 只能用于数据处理功能            |
| Hue      | 可以用作数据处理,元数据管理,工作流调度 | 扩展型不佳,与Hadoop组件耦合紧密 |

+ 需求分析
  1. 需要高的灵活性
  2. 尽可能的支持数据处理,元数据管理,工作流调度
  
+ 父子依赖之间的投影映射问题

4. **工作流调度方案**

   



5.  **关于处理异构数据源连接查询的问题**

开源解决方案:

`presto:` 

​	6. **统一查询问题**

开源解决方案:

360公司 `quickSql`