#### 关于字符串类型的设计

1. 理论上的区别

   > **char**

   `char`类型为固定长度的字符串，比如说char(10),它定义了指定的字符串长度最大为10个字符，如果你现在输入一个字符串为'12345678'，那么它在char类型中到底会占用多少个字符呢？

   答案是10个，后面缺少的2个字符，MySQL会自动补充为空值，然后进行存放。在取这个记录的时候，char类型的会使用trim()函数去掉多余的空格，所以我们看到的还是8个字符的记录。

   **当输入的字符长度大于最大的长度时，MySQL会自动报错**。

   > **varchar**

   `varchar`类型是长度可变的字符串，`varchar(M)`表示最大长度是M个字符，`varchar`的最大实际长度由最大的行的大小和使用的字符集确定。

   例如`varchar(50)`定义了一个最大长度为50的字符串，如果插入的字符串只有`20`个字符，那么实际存储的字符串具有`21`个字符，因为`varchar`会**自动包含一个字符串结束字符**。

   `varchar`在值保存和检索时,尾部的空格仍然保留.

2. 场景分析

   关于`char`： 

   ​    `CHAR`适合存储很短的字符串，或者所有值都接近同一个长度。

   ​    对于经常变更的数据，`CHAR`也比`VARCHAR`更好，因为定长的`CHAR`类型不容易产生碎片。

   ​	对于非常短的列, `CHAR`在存储空间上也更有效率。例如用`char(1)`来存储只有`Y`和`N`的值，只需要一个字节，但是`varchar`却需要两个字节，因为还一个记录长度的额外字节。

   关于`varchar`: 

   ​     `VARCHAR`类型用于存储可变长字符串，是最常见的字符串数据类型。它比定长类型     更节省空间，因为它仅使用必要的空间（例如，越短的字符串使用越少的空间）。

   ​     `VARCHAR`节省了存储空间，所以对性能也有帮助。但是，由于行是变长的，在UPDATE时可能使行变得比原来更长，这就导致需要做额外的工作。如果一个行占用 的空间增长，并且在页内没有更多的空间可以存储，在这种情况下，不同的存储引擎的处理方式是不一样的。例如，`MyISAM`会将行拆成不同的片段存储，`InnoDB` 则需要分裂页来使行可以放进页内。

   ​     `VARCHAR`需要使用1或2个额外字节记录字符串的长度：如果列的最大长度小于或等于`255`字节，则只使用`1`个字节表示，否则使用`2`个字节。假设采用`latinl`字符集 ，一个`varchar(10)`的列需要11个字节的存储空间。`varchar(1000)`的列则需要`1002`个字节，因为需要2个字节存储长度信息。



#### Unique关键字

在数据库设计中设置主键的字段是不会重复的、唯一的，如果有其他字段也需要保持唯一性应该如何设置呢？

解决方法: 使用unique关键字

```sql
CREATE TABLE `member` (
		`id` int(11) NOT NULL AUTO_INCREMENT,
		`name` varchar(18) NOT NULL ,
		`phone` varchar(18) NOT NULL unique,
		PRIMARY KEY (`id`)  
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
```





#### [数据仓库设计规范](# https://mp.weixin.qq.com/s?__biz=MzI2MDQzOTk3MQ==&mid=2247484635&idx=1&sn=aaec70cb5cf5900e39849ff7b25a8c6a&chksm=ea68ee17dd1f67018f93c96a6fcd00563022589ba0b7913394e132c5ec9791fc2ffd3ac6998f&scene=21#wechat_redirect)