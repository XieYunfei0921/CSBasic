**存款计量系统开发**

---

### 整体架构

以Eureka作为服务注册中心,使用Zuul作为服务网关,对客户端发送的请求进行路由.使用SpringCloud Config作为分布式配置中心,将配置存储在git仓库中.主要包含账户服务,统计服务,以及消息发布服务等服务.服务消费使用Ribbon处理,并配合Hystrix进行服务降级.使用Turbine作为系统监控工具.此外对系统的日志进行采集的工作,使用LogStash作为日志采集工具,使用SpringCloud Sleuth进行抽样采集,将采集的日志入库.

#### 账户服务

提供账户查询以及更新的接口,使用Spring OAuth进行用户权限验证.

#### 权限控制服务

使用OAuth2作为权限验证工具,提供用户信息查询以及更新的接口

#### 统计服务

主要是进行统计参数的计算，通过捕捉每个账户的时间序列列表（每个时间节点包含用户的存款值，汇率等信息），来形成用户存款的流动情况。

#### 推送服务

存储用户的交互信息,以及消息发送的设置信息.调度器从其他服务上收集必要的信息,并发送消息给订阅的用户.

**技术栈**

Spring Scheduler,SpringBoot

#### 集群监控

使用SpringCloud提供的Turbine组件对集群进行监控

#### 日志分析与采集

**技术栈**

使用LogStash作为日志采集工具,使用SpringCloud Sleuth作为日志的采样工作

### 项目细则

#### 如何使用OAuth2做权限验证的

具体做法：

在应用的启动程序上添加`@EnableGlobalMethodSecurity`注解

自定义OAuth2验证规则，提供账户服务，统计服务，以及推送服务的权限.

#### Spring如何进行任务的调度以及邮件服务的支持

使用Spring Framework提供的Email功能以及调度功能,实现邮件推送以及调度的功能。

配置cron参数，定时将邮件推送给订阅用户

#### 推送服务是怎么做的



#### 日志采集是如何进行的



#### 集群监控Turbine是如何实现的

