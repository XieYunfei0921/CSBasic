#### 事务的ACID特性

+ 原子性

  原子类型指的是数据库事务是不可分割的工作单位，只有使事务中所有的数据库操作都执行成功，才算事务成功。如果事务中任何一个SQL语句执行失败,执行成功的SQL语句必须撤销,数据库状态应当回退到执行事务之前的状态.

+ 一致性

  一致性指的是事务将数据库从一种状态转变到另一种状态,事务开始之前和事务结束之后,数据库的完整性约束没有被破坏.

+ 隔离性

  一个事务的影响是指该事务提交前对其他事务都不可见.(通过锁来实现)

+ 持久性

  事务一旦提交,结果就是永久性的,即使发生宕机等故障,数据库也能将数据恢复.

#### 事务的实现

原子性,一致性,持久性通过数据库的redo和undo实现,隔离性通过锁实现.

+ **redo**

  在Innodb存储引擎中,事务日志通过重做日志文件和InnoDB存储引擎的日志缓冲实现.当开始一个事务的时候,会记录该事务的一个LSN(日志序列号).

  当事务执行的时候,会向InnoDB存储引擎日志缓冲中插入事务日志.

  当事务提交的时候,会将InnoDB中的日志缓冲写入到磁盘中.

  也就是在写数据前,需要先写日志,这种方法称作预先写日志方式(WAL).

  InnoDB通过WAL保证事务的完整性,意味着磁盘上存储的数据页和内存缓冲池中的页是不同步的.对于内存缓冲池中页的修改,显示写入重做日志文件中(内存中),在写入磁盘,因此是一种异步的方式.

+ **undo**

  对于数据库进行修改的时候,数据库不但会产生redo,而且会产生undo.即使执行的事务或语句由于某种原因失败了,或者使用rollback进行回滚,可以使用undo将数据回滚到修改前.

  undo在数据库内部存储的是一个特殊的段信息,undo段位于共享表空间中.

  > 注意: 数据库只是逻辑上恢复到原来的位置,所有修改被逻辑性的修改回去.
  >
  > 但是数据结构可能修改前后发生了变化.

#### 事务控制语句

#### 隐式提交的SQL语句

#### 对于事务操作的统计

#### 事务的隔离级别

#### 分布式事务