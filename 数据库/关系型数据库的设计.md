**关系型数据库的设计**

---

##### 原子域与第一范式

ER模型行实体集和联系集之间存在某种程度的子结构。

如果存在多值属性以及组合属性，当从这些类型的属性ER设计创建表时，要消除这个子结构。对于组合属性，让每个子属性称为一个属性。对于多值属性，为多值集合创建一条元组。

在关系模型中，将属性不具有任何子结构这个思想形式化。一个域是原子的，如果该域元素是不可分的单元.称关系模式R属于**第一范式**.

##### 使用函数依赖进行分解

一个关系满足所有现实世界约束的实例称作合法实例.在一个数据块中的合法实例的所有关系实例都是合法实例.

对于函数依赖**K ->  R**,在r(R)上成立,则K是r(R)的一个超码,也就是说对于r(R)的每个合法实例,对于实例中每个元组t1和t2,凡是t1[K]=t2[K],则t1[R]=t2[R]的关系,则称K是一个**超码**.

> 一般地,如果beta属于alpha,且形如alpha -> beta 的函数时**平凡的**.
>
> alpha称作**决定因素**
>
> <img src="E:\截图文件\平凡依赖的确定.png" style="zoom:67%;" />
> 注意：一般情况下讨论非平凡依赖

**第二范式**

**定义**：

> 如果关系R是第一范式,并且每个主属性都完全依赖于R的吗,则R符合第二范式.

违反2NF的情景:

1.  插入异常

   <img src="E:\截图文件\违反2NF.png" style="zoom:67%;" />

2. 数据冗余性增大

   <img src="E:\截图文件\违反2NF3.png" style="zoom:67%;" />

3. 删除异常

   <img src="E:\截图文件\违反2NF2.png" style="zoom:67%;" />

4. 修改复杂

   <img src="E:\截图文件\违反2NF4.png" style="zoom:67%;" />

   产生上述问题的原因:

   <img src="E:\截图文件\原因.png" style="zoom:67%;" />

   修改方案:

   <img src="E:\截图文件\解决方案.png" style="zoom:67%;" />

**第三范式**

**定义:**

关系模式R<U,F>属于第一范式,且R中存在码X,属性组Y合主属性Z满足Z不包含Y,使得X->Y,Y->Z,Y 不依赖于X成立,则称R<U,F>属于第三范式

在上述示例中

SD(Sno,Sdept)是第三范式

DL(Sdept,Sloc)属于第三范式

**不满足第三范式可能遇到的问题**:

1.  插入异常

<img src="E:\截图文件\违反3NF问题.png" style="zoom:67%;" />

2. 删除异常

   <img src="E:\截图文件\违反3NF问题2.png" style="zoom:67%;" />

3. 数据冗余

   <img src="E:\截图文件\违反3NF问题3.png" style="zoom:67%;" />

   **产生原因与解决方法**

   <img src="E:\截图文件\解决方法.png" style="zoom:67%;" />

   **第三范式的性质**

   <img src="E:\截图文件\3NF性质.png" style="zoom:67%;" />

**Boyce-Codd范式**

1.  **第三范式的缺陷**

   <img src="E:\截图文件\3NF缺陷.png" style="zoom:67%;" />

2. **BC范式的定义**

   关系模式R<U,F>属于第一范式,如果对于R的每个函数依赖X->Y,且X不包含Y,X必定含有码,则R满足BC范式.

   级,关系模式R<U,F>中,每个决定因素都包含码

3.  **三范式异常情况**

    <img src="E:\截图文件\3NF异常情况.png" style="zoom:67%;" />

4. **3NF缺陷的处理方案**

   <img src="E:\截图文件\3NF异常的解决.png" style="zoom:67%;" />