#### **分布式文件系统**

---

1.  [分布式系统基本概念](# 分布式系统基本概念)
2.  [分布式系统的实现以及基本要求](# 分布式系统的实现以及基本要求)
3.  [命名和共享语义](# 命名和共享语义)
4.  [远程文件访问和缓存](# 远程文件访问和缓存)
5.  [容错](# 容错)

---

#### 分布式系统基本概念

1.  分布式系统定义

   ```markdown
   分布式系统是基于软件实现的一种多处理机系统。是多个处理机通过通信线路互连构成的松散耦合系统。系统的处理和控制在各个处理机上。换言之，是利用软件系统方式构建在计算机网络上的一种多处理机系统。
   ```

   分布式系统与一般多处理机系统的不同:

   +  分布式系统每个节点都会一台独立的计算机，并配置有外部设备。
   +  分布式系统耦合度更加分散，地理分布区域更加广阔。
   +  分布式系统中每个节点都可以运行不同操作系统，每个节点拥有自己的文件系统。处理本节点的管理外，还对其他多个机构进行实施管理。

2.  分布式系统特征

   +  分布性

     系统由多台计算机组成，从位置和地域范围而言。是分散且广阔的，即地理位置的分布性。从系统功能上来看，分散在系统的各个节点上，即功能分布性。从系统资源来说，分布在各个节点计算机上，为资源分布性。从控制上来说，一般分布式系统没有主从之分，即控制分布性。

   +  透明性

     系统资源被所有计算机共享，每台计算机的用户不仅可以使用本机资源，还可以使用获取分布式系统中其他计算机资源(CPU,文件，打印)

   +  同一性

     系统中若干计算机可以互相协作完成一个共同任务。或者说一个程序可以分布在几台计算机上并行执行。

   +  全局性

     系统具备一个全局性的进程通信机制，系统中任意两台计算机都可以通过该机制实现信息交换。

3.  分布式系统优点

   +  计算能力强    采用了并行处理技术，将任务划分为多个子任务，并将子任务分派到不同的计算机系统上。
   +  易于实现共享  分布式系统建立在计算机网络上，对于系统资源，很容易实现共享。
   +  方便通信  各节点通过通信网络链接，建立在计算机网络基础上
   +  可靠性高  单机故障不会影响到其他机器
   +  可扩充性好  分布式系统中可以方便的添加若干节点，而不用修改系统软硬件

4.  分布式操作系统与单机操作系统的不同

   +  通信管理系统

     分布式OS应当提供某种通信方式，使得不同节点上的用户或进程能方便的进行信息交换。一般的，分布式OS通过通信原语方式，实现系统内部进程通信，但是由于系统没有共享内存。需要按照通信协议的约定和规则实现。

   +  资源管理功能

     分布式OS对所有资源提供统一资源管理，统一资源分配和统一调度。

   +  进程管理功能

     针对系统分布性特征，为平衡各个节点负载，加速计算速度。分布式OS应当提供**进程或者计算迁移**。为协调进程对资源的共享和竞争，提高进程的并行程度，应当提供分布式的同步和互斥机制，以应对**死锁**措施。

#### 分布式系统实现以及基本要求

1.  DFS实现方式

   +  共享文件系统方式

     这种方式称作**专用服务器**方式，类似于本地文件系统使用树形目录结构。管理本地计算机存储设备上的文件方式。共享文件系统方式也采用了一个逻辑树结构，对整个系统中的文件系统进行管理(B+树)。系统采取客户端服务器模式，设置若干个文件服务器。数据分布地存储在各个文件服务器上。用户可以忽略文件的实际物理地址位置,只需要一定的逻辑关系。通过文件服务器上的服务进程，即可访问整个系统的共享资源。文件服务器的分布和逻辑树架构，对于用户都是透明的。用户既可以向访问本地文件一样访问分布在多个节点的文件。

     这种实现方式比较简单，对于设备要求不高，通用性高。使用的例子有NFS,AFS和Sprite文件系统。

   +  共享磁盘方式

     这种范式也称作无服务方式，在这种方式下，系统没有专门的文件服务器。而是配置了一个共享磁盘(高速磁盘,IBM SSA).并将其与主机，客户机连接在内部高速网络上，主机和客户机都将共享磁盘作为存储设备。直接以盘块的方式读写磁盘上文件，实现共享。

     该方式对设备要求高，需要高端存储设备(NAS,SAN)。使用该方案的有IBM GPFS,GFS等

2.  基本要求

   +  透明性要求

     1.  位置透明性

        文件服务器及文件服务进程的多重性。与共享存储器的分散性，对客户透明。

     2.  移动透明性

        存储资源和时间在系统内位置移动和改变对于客户透明

     3.  性能透明性

        允许系统中服务负载有一定的变化量，仍能满足客户的性能保障

     4.  扩展透明性   

        允许系统在规模，性能和功能上进行扩展，以满足负载和网络规模增长

   +  高性能和高可靠性

   +  容错性

     一般采用冗余措施来对故障进行掩盖

     1.  信息冗余   增加校验信息
     2.  时间冗余   重复执行操作
     3.  物理冗余  增加额外的副本，设备或者进程

   +  安全性

     通过身份认证，访问控制和安全通道方式，保证系统安全性

   +  一致性

     保证客户本地缓存文件副本与文件服务器上主副本一致

#### 命名和共享语义

1.  命名

   命名主要采用如下三种方案:

   +  结合**主机名**和**本地名**对文件命名

     保证系统范围内的唯一性，简单易行，但是不符合命名的透明性

   +  若干服务器中的远程目录，添加到用户本地目录

     管理复杂度高，结构混乱，安全度低,一旦一个服务器故障，会导致客户机上目录失效。

   +  全局同一命名

     考虑到不同系统中的特殊文件，使得方案实现难度较大

2.  共享语义

3.  租赁协议

#### 远程文件访问和缓存

#### 容错